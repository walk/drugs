
plugins {
    id "org.jetbrains.kotlin.jvm" version "$kotlin_version" apply true
    id "com.github.johnrengelman.shadow" version "$shadowJar_version" apply true
}

group 'me.brew.drugs'
version '1.0-SNAPSHOT'

repositories {

    flatDir {
        dirs 'libs'
    }

    maven { url "https://jitpack.io" }

    mavenLocal()
    mavenCentral()
}

this.tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

apply plugin: "kotlin"
apply plugin: 'maven-publish'

afterEvaluate {

    this.targetCompatibility = '1.8'
    this.sourceCompatibility = '1.8'

    sourceSets {
        main.java.srcDirs += 'src/main/kotlin/'
    }

    shadowJar {
        minimize()
        shadowJar.classifier = null
    }

    compileKotlin {
        kotlinOptions.jvmTarget = '1.8'
    }

    dependencies {
        compileOnly "org.jetbrains.kotlin:kotlin-reflect:$kotlin_version"
        compileOnly "org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version"

        compileOnly 'org.spigotmc:spigot-api:1.16.5-R0.1-SNAPSHOT'

        compileOnly fileTree(dir: 'libs', include: ['*.jar'])
    }

}